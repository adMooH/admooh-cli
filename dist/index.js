#!/usr/bin/env node
!function(e){var t={};function o(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=e,o.c=t,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=1)}([function(e,t){e.exports=require("chalk")},function(e,t,o){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),(new(n(o(2)).default)).start()},function(e,t,o){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(o(3)),l=n(o(0)),a=n(o(4)),i=n(o(5)),M=n(o(6)),s=n(o(7)),u="adMooH CLI";t.default=class{constructor(){this._helpCommand=new M.default,this._createTemplateCommand=new s.default}start(){r.default(),console.log("    ```                                                  \t \n   ``:::.`````        ``````````````              ```       \n    `sNNms.````    ``-+osyyyyyysso+/:.```     ```````-::-`  \n    `.dNNNm+```````+mMMMMMMMMMMMMmo:.``````  `````./hNNNo`  \n     `.smNds-`````sMMMMMMMMMMMMMMd:``````````````:hNNNm:`   \n       ``-/ooo:``/MMMMMMMMMMMMMMMMMmy+-```````..-ymNdo.`    \n               ``dMMMMMMMMMMMMMMMMMMMMN:``````.://:.``      \n               `-MMMMN-:NMMMMMMMMMMdymMMdys+``              \n              ``sMMMMs`:MMMMMMMMMMMo`/MMMMMN.`              \n              ``mMMMM-`yMMMMMMMMMMMd`.mMMMMM:`              \n              `.MMMMMNNMMMMMMMMMMMMMy+mMMMMM+`              \n              `-MMMNMMMMMMMMMMMMMMMMMMMMMMMMo`              \n              `-/-....:+sydmNMMMMMMMMMmhydNM+`              \n             `.+dNNNNNdyo+:-...--::--..--..:-`              \n             `/NN/.-smNNNNNNNNNmmddddmNNdhds-`              \n             `:NNoomNNNNNNNNNNNNNNNNNNms-`.md``             \n             ``+NNNNNNNNNNNNNNNNNNNNNNNNNhyNm``             \n              ``-yNNNNNNNNNNNNNNNNNNNNNNNNNNs``             \n                ``.+ydNNNNNNNNNNNNNNNNNNNNd+.`              \n                   ````-:/+ooosssssssso+/-```               \n                           ``````````````                   \n"),console.log(l.default.blue(a.default.textSync(u,{horizontalLayout:"full"})));const e=i.default(process.argv.slice(2));if(e.help)return void this.helpCommad();const t=e._[0];if(void 0!==t)switch(t.toLowerCase()){case"create-template":{const t=e.n||e.name||void 0,o=e.p||e.path||void 0;this.createTemplateCommand(t,o);break}default:return void console.log(l.default.red(`command '${t}' no ecxiste.`))}}helpCommad(){this._helpCommand.showHelpScreen()}createTemplateCommand(e,t){this._createTemplateCommand.createTemplate(e,t)}}},function(e,t){e.exports=require("clear")},function(e,t){e.exports=require("figlet")},function(e,t){e.exports=require("minimist")},function(e,t,o){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(o(0));t.default=class{showHelpScreen(){console.log(r.default.blue(""))}}},function(e,t,o){"use strict";var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,l){function a(e){try{M(n.next(e))}catch(e){l(e)}}function i(e){try{M(n.throw(e))}catch(e){l(e)}}function M(e){e.done?r(e.value):new o(function(t){t(e.value)}).then(a,i)}M((n=n.apply(e,t||[])).next())})},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const l=r(o(8)),a=r(o(9)),i=r(o(12)),M=r(o(13)),s=r(o(14)),u=r(o(15)),c=r(o(0)),d=r(o(16));t.default=class{constructor(){this._fileUtils=new a.default,this._repouRL="https://github.com/adMooH/signage-template-model/archive/master.zip",this._modelFolderName="signage-template-model-master"}createTemplate(e,t){return n(this,void 0,void 0,function*(){let t=e;if(void 0===t||""===t){const e=[{name:"templateName",type:"input",message:"What's your template name ?:",validate:e=>e.length?!!this.checkTemplateName(t)||"Please enter a valid template name.":"Please enter your template name."}],{templateName:o}=yield l.default.prompt(e);t=o}else if(!this.checkTemplateName(t))return;const o=s.default.resolve(t);M.default.ensureDirSync(t),console.log("Create template in:",c.default.bold(o)),console.log(),console.log(c.default.blue("downloading model files..."));const n=s.default.join(o,"model.zip"),r=yield i.default(this._repouRL);yield new Promise((e,t)=>{const o=M.default.createWriteStream(n);r.body.pipe(o),r.body.on("error",e=>{t(e)}),o.on("finish",()=>{e()})}),console.log(c.default.blue("unzip model files...")),yield new Promise((e,t)=>{const r=M.default.createReadStream(n),l=u.default.Extract({path:o});r.pipe(l),l.on("close",()=>{e()})}),console.log(c.default.blue("removing zip file...")),yield new Promise((e,t)=>{M.default.unlink(n,t=>{t&&console.error(t),e()})}),console.log(c.default.blue("copying model files..."));const a=s.default.normalize(s.default.join(o,this._modelFolderName,"//"));M.default.copySync(a,o)})}checkTemplateName(e){return!!d.default(e).validForNewPackages||(console.error(`Could not create a template called ${c.default.red(`"${e}"`)} because of npm naming restrictions:`),!1)}}},function(e,t){e.exports=require("inquirer")},function(e,t,o){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(o(10)),l=n(o(0)),a=n(o(11));t.default=class{createDirectory(e){if(a.default(e))try{this.directoryExists(e)?console.warn(l.default.yellow("Directory already exists!")):r.default.mkdirSync(e)}catch(e){console.warn(l.default.red(JSON.stringify(e)))}else console.warn(l.default.red("Directory name is invalid!"))}directoryExists(e){try{return r.default.statSync(e).isDirectory()}catch(e){return!1}}fileExists(e){try{return r.default.existsSync(e)}catch(e){return!1}}}},function(e,t){e.exports=require("fs")},function(e,t){e.exports=require("is-valid-path")},function(e,t){e.exports=require("node-fetch")},function(e,t){e.exports=require("fs-extra")},function(e,t){e.exports=require("path")},function(e,t){e.exports=require("unzip")},function(e,t){e.exports=require("validate-npm-package-name")}]);